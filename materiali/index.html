<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>SERES - Gestione Materiali</title>
    <link rel="stylesheet" href="styles.css?v=20250707-cache-fix">
</head>
<body>
    <div class="header">
        <button class="menu-toggle" id="menuToggle">☰</button>
        <h1>📦 SERES - Gestione Materiali</h1>
        <div class="search-section">
            <span class="search-text" id="searchText">Ricerca</span>
            <button class="search-icon" id="searchToggle">🔍</button>
        </div>
    </div>

    <!-- Area di ricerca -->
    <div id="searchOverlay" class="search-overlay">
        <div class="search-container">
            <div class="search-header">
                <div class="search-input-container">
                    <input type="text" id="searchInput" placeholder="Cerca...">
                    <button id="clearSearchButton" class="clear-search-button">✕</button>
                    <button id="searchButton" class="search-button">🔍</button>
                </div>
                <button id="searchClose" class="search-close">✕</button>
            </div>
            <div id="searchResults" class="search-results"></div>
        </div>
    </div>

    <!-- Menu Slide -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <h3>Menu</h3>
            <button class="menu-close" id="menuClose">✕</button>
        </div>
        <div class="menu-content">
            <h4 style="margin: 25px 0 15px; color: #333;">⚙️ Azioni</h4>
            <button class="menu-item" id="btnAddMaterial">
                📦 Nuova Associazione
            </button>
            <button class="menu-item" id="btnNewMaterial">
                ➕ Nuovo Materiale
            </button>
            <button class="menu-item" id="btnRefresh">
                🔄 Aggiorna Dati
            </button>
            <h4 style="margin: 25px 0 15px; color: #333;">ℹ️ Info</h4>
            <button class="menu-item" id="btnAbout">
                📖 Guida all'uso
            </button>
            <button class="menu-item" id="btnMainMenu">
                🏠 Menu Principale
            </button>
        </div>
    </div>    <!-- About Modal -->
    <div class="about-modal" id="aboutModal">
        <div class="material-modal-content">
            <div class="material-modal-header">
                <h2>📦 Gestione Materiali SERES</h2>
                <button class="modal-close" id="aboutClose">✕</button>
            </div>
            <div class="material-modal-body">
                <h3>🎯 Scopo dell'applicazione</h3>
        <p>Questa applicazione è progettata per gestire e monitorare i materiali SERES in modo efficiente. Permette di:</p>
        <ul>
            <li>Gestire l'inventario dei materiali in diverse ubicazioni</li>
            <li>Aggiungere nuovi materiali e associazioni</li>
            <li>Tracciare le quantità e i movimenti</li>
            <li>Visualizzare i dati in diverse modalità</li>
        </ul>

        <h3>🔍 Viste e Navigazione</h3>
        <p>L'applicazione offre tre viste principali, accessibili dal menu inferiore:</p>
        <ul>
            <li><strong>Vista per Ubicazione 📍</strong>
                <ul>
                    <li>Visualizza i materiali raggruppati per ubicazione</li>
                    <li>Accesso rapido ai dettagli di ogni materiale</li>
                    <li>Panoramica completa della distribuzione dei materiali</li>
                </ul>
            </li>
            <li><strong>Vista per Categoria 📂</strong>
                <ul>
                    <li>Organizza i materiali per categoria merceologica</li>
                    <li>Facilita la ricerca per tipo di materiale</li>
                    <li>Visione d'insieme delle categorie disponibili</li>
                </ul>
            </li>
            <li><strong>Vista per Tipo 🏷️</strong>
                <ul>
                    <li>Mostra tutti i tipi di materiale disponibili</li>
                    <li>Facilita la ricerca di materiali specifici</li>
                    <li>Visualizza dettagli per ogni tipo di materiale</li>
                </ul>
            </li>
        </ul>

        <h3>🔎 Ricerca</h3>
        <p>La funzione di ricerca (🔍) nell'header permette di:</p>
        <ul>
            <li>Cercare rapidamente qualsiasi materiale</li>
            <li>Filtrare per categoria, tipo o ubicazione</li>
            <li>Accedere velocemente ai dettagli dei materiali</li>
        </ul>

        <h3>📋 Gestione Materiali</h3>
        <ul>
            <li><strong>Nuovo Materiale ➕</strong>
                <ul>
                    <li>Aggiungi un nuovo tipo di materiale al sistema</li>
                    <li>Definisci categoria (esistente o nuova)</li>
                    <li>Specifica tipo e unità di misura</li>
                    <li>Imposta soglia minima per gli alert</li>
                    <li>Aggiungi note opzionali</li>
                </ul>
            </li>
            <li><strong>Nuova Associazione 📦</strong>
                <ul>
                    <li>Collega un materiale esistente a una ubicazione</li>
                    <li>Seleziona da categorie e tipi disponibili</li>
                    <li>Specifica l'ubicazione di destinazione</li>
                    <li>Inserisci la quantità iniziale</li>
                </ul>
            </li>
            <li><strong>Gestione Quantità 📝</strong>
                <ul>
                    <li>Visualizza i dettagli del materiale</li>
                    <li>Aggiorna le quantità in giacenza</li>
                    <li>Traccia lo storico dei movimenti</li>
                    <li>Registra l'operatore per ogni modifica</li>
                </ul>
            </li>
        </ul>

        <h3>🔄 Aggiornamento Dati</h3>
        <ul>
            <li>Il pulsante "Aggiorna Dati" nel menu permette di:</li>
            <ul>
                <li>Sincronizzare i dati con il server</li>
                <li>Visualizzare le modifiche più recenti</li>
                <li>Garantire l'accuratezza delle informazioni</li>
            </ul>
        </ul>

        <h3>� Identificazione Operatore</h3>
        <ul>
            <li>Per ogni operazione di modifica è richiesto:</li>
            <ul>
                <li>Nome dell'operatore (minimo 4 caratteri)</li>
                <li>Conferma dell'operazione</li>
            </ul>
        </ul>        <h3>🔄 Aggiornamento Dati</h3>
        <p>Usa il pulsante "Aggiorna Dati" nel menu per assicurarti di visualizzare sempre le informazioni più recenti.</p>
            </div>
        </div>
    </div>

    <!-- Material Detail Modal -->
    <div class="material-modal" id="materialModal">
        <div class="material-modal-content">
            <div class="material-modal-header">
                <h2 id="materialModalTitle">Dettaglio Materiale</h2>
                <button class="modal-close" id="materialModalClose">✕</button>
            </div>
            <div class="material-modal-body">
                <div class="material-details-grid">
                    <div class="detail-row">
                        <div class="detail-label">Codice:</div>
                        <div class="detail-value" id="materialCodice"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Categoria:</div>
                        <div class="detail-value" id="materialCategoria"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Tipo:</div>
                        <div class="detail-value" id="materialTipo"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Ubicazione:</div>
                        <div class="detail-value" id="materialUbicazione"></div>
                    </div>
                    <div class="detail-row">
                        <div class="detail-label">Quantità Attuale:</div>
                        <div class="detail-value" id="materialQuantita"></div>
                    </div>
                </div>                <div class="update-section">
                    <h3>Aggiorna Quantità</h3>
                    <div class="input-group">
                        <label for="nuovaQuantita">Nuova Quantità:</label>
                        <input type="number" id="nuovaQuantita" step="0.01" min="0">
                    </div>
                    <div class="input-group">
                        <label for="userName">Il tuo nome:</label>
                        <input type="text" id="userName" placeholder="Inserisci il tuo nome (min. 4 caratteri)">
                    </div>
                    <button class="update-button" id="updateQuantita">
                        💾 Salva Modifica
                    </button>
                </div>

                <!-- Sezione Sposta Materiale -->
                <div class="update-section">
                    <h3>🚚 Sposta Materiale</h3>
                    <div class="input-group">
                        <label for="quantitaDaSpostare">Quantità da Spostare:</label>
                        <input type="number" id="quantitaDaSpostare" step="0.01" min="0.01">
                    </div>
                    <div class="input-group">
                        <label for="ubicazioneDestinazione">Ubicazione Destinazione:</label>
                        <select id="ubicazioneDestinazione">
                            <option value="">Seleziona ubicazione...</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="userNameSposta">Il tuo nome:</label>
                        <input type="text" id="userNameSposta" placeholder="Inserisci il tuo nome (min. 4 caratteri)">
                    </div>
                    <button class="update-button" id="spostaMateriale" style="background-color: #FF8C00;">
                        🚚 Sposta Materiale
                    </button>
                </div>

                <!-- Sezione Storico Movimenti -->
                <div class="storico-section mobile-friendly">
                    <h3 class="storico-title">Storico Movimenti</h3>
                    <div class="storico-content mobile-scrollable">
                        <!-- Il contenuto dello storico verrà caricato dinamicamente qui -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Associa Materiale Modal -->
    <div class="material-modal" id="associaMaterialeModal">
        <div class="material-modal-content">
            <div class="material-modal-header">
                <h2>Associa Materiale</h2>
                <button class="modal-close" id="associaMaterialeClose">✕</button>
            </div>
            <div class="material-modal-body">
                <div class="form-grid">
                    <div class="input-group">
                        <label for="selectCategoria">Categoria:</label>
                        <select id="selectCategoria" required>
                            <option value="">Seleziona una categoria...</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="selectTipo">Tipo:</label>
                        <select id="selectTipo" required disabled>
                            <option value="">Seleziona un tipo...</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="selectUbicazione">Ubicazione:</label>
                        <select id="selectUbicazione" required>
                            <option value="">Seleziona un'ubicazione...</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="nuovaQuantitaAssociazione">Quantità:</label>
                        <input type="number" id="nuovaQuantitaAssociazione" step="0.01" min="0" required>
                    </div>
                    <div class="input-group">
                        <label for="userNameAssociazione">Il tuo nome:</label>
                        <input type="text" id="userNameAssociazione" placeholder="Inserisci il tuo nome (min. 4 caratteri)" required>
                    </div>
                </div>
                <button class="update-button" id="btnSalvaAssociazione">
                    💾 Salva Associazione
                </button>
            </div>
        </div>
    </div>

    <!-- Nuovo Materiale Modal -->
    <div class="material-modal" id="newMaterialModal">
        <div class="material-modal-content">
            <div class="material-modal-header">
                <h2>Nuovo Materiale</h2>
                <button class="modal-close" id="newMaterialModalClose">✕</button>
            </div>
            <div class="material-modal-body">
                <div class="form-grid">
                    <div class="input-group">
                        <label for="newMaterialCategoria">Categoria:</label>
                        <select id="newMaterialCategoria" required>
                            <option value="">Seleziona una categoria...</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="altroCategoria">Nuova Categoria:</label>
                        <input type="text" id="altroCategoria" placeholder="INSERISCI NUOVA CATEGORIA...">
                    </div>
                    <div class="input-group">
                        <label for="newMaterialTipo">Tipo:</label>
                        <input type="text" id="newMaterialTipo" placeholder="INSERISCI TIPO..." required>
                    </div>
                    <div class="input-group">
                        <label for="newMaterialUnitaMisura">Unità di misura:</label>
                        <select id="newMaterialUnitaMisura" required>
                            <option value="">SELEZIONA UN'UNITÀ DI MISURA...</option>
                            <option value="L">L (LITRI)</option>
                            <option value="KG">KG (KILOGRAMMI)</option>
                            <option value="PZ">PZ (PEZZI)</option>
                            <option value="F">F (FOGLI)</option>
                            <option value="SCATOLE">SCATOLE</option>
                            <option value="MT">MT (METRI)</option>
                            <option value="ALTRO">ALTRA UNITÀ DI MISURA...</option>
                        </select>
                    </div>
                    <div class="input-group" id="altraUnitaMisuraGroup" style="display: none;">
                        <label for="altraUnitaMisura">Nuova unità di misura:</label>
                        <input type="text" id="altraUnitaMisura" placeholder="INSERISCI NUOVA UNITÀ DI MISURA...">
                    </div>
                    <div class="input-group">
                        <label for="newMaterialSoglia">Soglia minima:</label>
                        <input type="number" id="newMaterialSoglia" step="0.01" min="0" placeholder="INSERISCI SOGLIA MINIMA...">
                    </div>
                    <div class="input-group">
                        <label for="newMaterialNote">Note:</label>
                        <textarea id="newMaterialNote" placeholder="INSERISCI EVENTUALI NOTE..."></textarea>
                    </div>
                    <div class="input-group">
                        <label for="newMaterialUserName">Il tuo nome:</label>
                        <input type="text" id="newMaterialUserName" placeholder="INSERISCI IL TUO NOME (MIN. 4 CARATTERI)" required>
                    </div>
                </div>
                <button class="update-button" id="btnSalvaNuovoMateriale">
                    💾 Salva Materiale
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content Section -->
    <div class="main-content" id="mainContent">
        <!-- Content will be dynamically loaded here -->
        <div id="header">
            <h1></h1>
            <p class="description"></p>
        </div>
        <div id="content"></div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-message" id="loadingMessage">Caricamento in corso...</div>
    </div>    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-button" data-view="ubicazione">
            <span class="icon">📍</span>
            <span class="label">Ubicazione</span>
        </button>
        <button class="nav-button" data-view="categoria">
            <span class="icon">📂</span>
            <span class="label">Categoria</span>
        </button>
        <button class="nav-button" data-view="tipo">
            <span class="icon">🏷</span>
            <span class="label">Tipo</span>
        </button>
    </div>

    <script src="script.js?v=20250707-cache-fix"></script>
</body>
</html>
